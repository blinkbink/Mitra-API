<!DOCTYPE html>
<html>
<head>
<title>Tandatangan Dokumen</title>
<!--  <meta name="viewport" content="width=content-width, initial-scale=1, maximum-scale=1.2, user-scalable=yes" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />-->

<meta name="viewport" content="width=device-width, initial-scale=1" >
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,maximum-scale=1, ">

<script src="$domainwv/js/pdf.min.js"></script>

<script
	src="$domainwv/js/popper.min.js"
	integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	crossorigin="anonymous"></script>

<link rel="stylesheet" href="$domainwv/js/jquery-ui.min.css">
<script type="text/javascript" src="$domainwv/js/cdnjquery.min.js"></script>
<script type="text/javascript" src="$domainwv/js/cdnjquery-ui.min.js"></script> 
	
<script type="text/javascript" src="$domainwv/js/cdnbootstrap.min.js"></script>	
<script type="text/javascript" src="$domainwv/js/cdnjquery.ui.touch-punch.min.js"></script>
	
<script type="text/javascript" src="$domainwv/js/passwordschecksign.js?v=$rand"></script>
<script type="text/javascript" src="$domainwv/js/submitV.js?v=$rand"></script>
<script type="text/javascript" src="$domainwv/js/color_css.js"></script>
<script type="text/javascript" src="$domainwv/js/md5.js"></script>
<script type="text/javascript" src="$domainwv/js/otp.js?v=$rand"></script>
<script type="text/javascript" src="$domainwv/js/pdfComp.js"></script>
<script type="text/javascript" src="$domainwv/js/pdf.js"></script>
<script type="text/javascript" src="$domainwv/js/pdf/pdf.worker.js"></script>
<script type="text/javascript" src="$domainwv/js/savePWD.js?v=$rand"></script>
<link rel="stylesheet" href="$domainwv/css1/bootstrap.min.css">	
<link rel="stylesheet" href="$domainwv/aktivasi/css/passwordscheck.css">

<script>
var lefts = 0;
var tops =0;
var widths = 0;
var heights = 0;
var def_style;
var sign=0;
var isSign=$flag;
var usersign=$usersign;
var usertype=$usertype;
var visible=$visible;
var size=$size;
var jmlttd=0;
var mitra=$mitra;
var statususer=$statususer;
var zo=0;
var zomx = 5;
var zimx = 0;

$(window).on('load', function() {
    $(".loader").delay(1700).fadeOut("slow");
});
	
jQuery(document).ready(function($) {

 $('#password_act').password();
 $('#password_act').on('password.text', (e, text, score) => {
			str=score
			//console.log("str:"+str)
			if(str<34){
				$('#messagepwd').html('<img src="$domainwv/img/close.png" height="24" width="20"/>').css('color', 'red');
			}
			else{
				$('#messagepwd').html('<img src="$domainwv/img/centang.png" height="24" width="20"/>').css('color', 'green');
			}
 })

});

function concatenate(){
    document.getElementById("result1").innerHTML =
    document.getElementById("text_area_1").value + " " +
    document.getElementById("text_area_2").value;
}
function signProcess(){
	$('#sgn-user').removeClass('sign-box').addClass('sign-box2');
	$('#sgnClick').hide();
	$('#sgnImg').show();
	sign=1;
}


function validatePwd() {
 	var fld=$("#password_act");
 	var fld2=$("#password_act2");
	
    if (fld2.val().length > 0) {
    	if (fld2.val() != fld.val()){
    		document.getElementById('agree').disabled = true;
    		document.getElementById('simpanpwd').disabled = true;
    		$("#agree").prop("checked", false);
    		$('#message').html('<img src="$domainwv/img/close.png" height="24" width="20"/>').css('color', 'red');
    		fld2.css("background-color","white");
    		//document.getElementById('labelconfirmpassword').style.color = "black";
    		$('#e_password2').closest('.form-group').removeClass('has-error has-feedback').addClass('has-success has-feedback');
            document.getElementById("e_password2").innerHTML="<span class=\"glyphicon glyphicon-ok form-control-feedback\">Password tidak sama</span>";
    	}
    	else{
    		if(str<34){
    			document.getElementById('agree').disabled = true;
        		document.getElementById('simpanpwd').disabled = true;
        		$("#agree").prop("checked", false);
    			$('#message').html('<img src="$domainwv/img/centang.png" height="24" width="20"/>').css('color', 'green');
        		fld2.css("background-color","white");
        		//document.getElementById('labelconfirmpassword').style.color = "black";
                $('#e_password2').closest('.form-group').removeClass('has-success has-feedback').addClass('has-error has-feedback');
                document.getElementById("e_password2").innerHTML="<span class=\"glyphicon glyphicon-remove form-control-feedback\"></span>";
    		}else{
    			document.getElementById('agree').disabled = false;
        		$('#message').html('<img src="$domainwv/img/centang.png" height="24" width="20"/>').css('color', 'green');
        		fld2.css("background-color","white");
        		//document.getElementById('labelconfirmpassword').style.color = "black";
                $('#e_password2').closest('.form-group').removeClass('has-success has-feedback').addClass('has-error has-feedback');
                document.getElementById("e_password2").innerHTML="<span class=\"glyphicon glyphicon-remove form-control-feedback\"></span>";	
    		}
    	}
    }else{
    	document.getElementById('agree').disabled = true;
    	document.getElementById('simpanpwd').disabled = true;
    	$("#agree").prop("checked", false);
    	$('#message').html('<img src="$domainwv/img/close.png" height="24" width="20"/>').css('color', 'red');
    	fld2.css("background-color","white");
    	//document.getElementById('labelconfirmpassword').style.color = "black";
        $('#e_password2').closest('.form-group').removeClass('has-success has-feedback').removeClass('has-error has-feedback');
            document.getElementById("e_password2").innerHTML="";

    }
    
}


//pjg ttd 165 x130
$(function () {
				$("#prosesSign").on('click', function() {
					
					if(visible==0)
					{
						sign=1;
					}
					if($by_pass_click)
					{
						sign=1;
					}
					for (x in jsonText) {
						if(jsonText[x].sgn=="0") {
							sign=0;
							break;
						}
					}
					if(cekComplete()){
						//$("#alertKonfirmasi").modal('show');
						var email = $("#inputUser").val();
						
						dataUser.usersign=email;
						checkDocSign("$domainwv");
				
					}
					else{
						if(size>0){
							//alertDanger("Lokasi tandatangan belum lengkap. Silakan lengkapi terlebih dahulu, "+jmlttd+" tanda tangan dari "+size);
							alertDanger("Anda belum menandatangani perjanjian. Silahkan tandatangani perjanjian terlebih dahulu");
						}
						else {
							alertDanger("Dokumen sudah ditandatangani.");
						}
					}
				});

				$("#main-body").hide();

				$("#saveLocation").on('click', function() {
					//DS.SubmitSignDoc();
					loading();
					//dataUser.auth=DS.getPass();
					saveSign();
				});
				
				$("#formSign").on("submit", function(e){
					//var userpwd = hex_md5($("#inputUser").val()+$("#inputPassword").val());
					var userpwd = hex_md5($("#username").val()+$("#inputPassword").val());
					//var userpwd = $("#pwd_user").val();					
					var email = $("#inputUser").val();
					var otp = $("#inputCode").val();
					
					dataUser.userpwd=userpwd;
					dataUser.otp=otp;
					dataUser.usersign=email;
					dataUser.mitra=mitra;
					$("#alertKonfirmasi").modal('hide');
					loading();
					prosesSignMitraV_session("$domainwv");
					return false;
				});
				
				$("#cancelLocation").on('click', function() {
					var text=JSON.parse('{"result":"01", "notif":"go back"}');
					//alert(text);
					window.parent.postMessage(text, '*');
				});
				
				
				$("#formactive").on("submit", function(e){
					//alert("masuk pak eko");
					
					var newuserpwd = hex_md5($("#inputNewUsername").val()+$("#password_act").val());
					var newusername = $("#inputNewUsername").val();
					var iduser=$("#inputiduser").val();
					var renewuserpwd = hex_md5($("#inputNewUsername").val()+$("#password_act2").val());
					
					dataUser.newuserpwd=newuserpwd;
					dataUser.renewuserpwd=renewuserpwd;
					dataUser.newusername=newusername;
					dataUser.iduser=iduser;
					//loading();
					savepwd("$domainwv");
					$("#username").val(newusername);
					//prosesSignMitraV("$domainwv");
					return false;
				});
				
				$("#formverif").on("submit", function(e){
					var scoreverifikasi = null;
					if ($("#inputVer").val().length < 6)
					{
						scoreverifikasi = 1;
						$("#null_verifikasi").text("Can't less than 6 characters");
					}
					else
					{
						scoreverifikasi = 0;
						$("#null_verifikasi").text("");
					}
					if(scoreverifikasi==0){
						proses_verifikasi("$domainwv");
					}
					
					
					
					
					return false;
				});
				
				$("#goButton").on('click', function() {
					 var nilainya = parseInt($('#pageText').text());
					 $('#gotopage').val(nilainya);
		              $('#gotoModal').modal({
		                keyboard: true,
		                backdrop:true
		              });
		             $('#gotoModal').modal('show');
		        });

		        $("#goEnter").on('click', function() {
		        	var pg=parseInt($('#gotopage').val());
		        	var tpg=parseInt($('#pdf-total-pages').text());
		        	  if ( pg > tpg ){
		            	  $('#gotoModal').hide();
		            	  alertDanger("Tidak Boleh Lebih Dari Jumlah halaman");
		              }else if(pg == null || pg < 1 || Number.isNaN(pg)){
		            	  $('#gotoModal').hide();
		            	  alertDanger("Tidak Boleh Kosong");
		              }else{
			              showPage(pg);
		              }
		             $('#gotoModal').hide();
		        });
		        $("#goHal").on('click', function() {
					 $('#gotoHalaman').modal('show');
		        });
				$('#widget').draggable({

					stop: function(event, ui) {

				        // Show dropped position.
				        var Stoppos = $(this).position();
				        //alert("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
				        lefts = Stoppos.left;
				        tops = Stoppos.top;
				    }
				});
				
				$('#widget1').draggable({
					start: function(event, ui) {
						//$(this).css("border-style","solid");
					},
					
					stop: function(event, ui) {
						//$(this).css("border-style","dashed");
				        // Show dropped position.
				        var Stoppos = $(this).position();
				        //alert("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
				        lefts = Stoppos.left;
				        tops = Stoppos.top;
				    }
				})
				  .mouseover(function() {
						$(this).css("border-style","solid");
						$(this).css("border-color","red");
				})
				  .mouseout(function() {
						$(this).css("border-style","dashed");
						$(this).css("border-color","black");
				});
				
				
				$('#img1').resizable({
					    stop: function(event, ui) {
				        widths = ui.size.width;
				        heights = ui.size.height;
				        alert("width:" +widths+ " height:"+heights);
				    }
				});
});
</script>

<style type="text/css">
#upload-button {
	width: 150px;
	display: block;
}

#file-to-upload {
	display: none;
}

#pdf-main-container {
	
}

#pdf-contents {
	display: none;
}

#pdf-meta {
	overflow: hidden;
}

#pdf-buttons {
	float: left;
}

#page-count-container {
	float: right;
}

#page-bottom {
	text-align: center;
}

#button-next {
	float: right;
}

#button-prev {
	float: left;
}

#pdf-current-page {
	display: inline;
}

#pdf-total-pages {
	display: inline;
}

#pdf-canvas {
	border: 1px solid rgba(0, 0, 0, 0.2);
	box-sizing: border-box;
	width: "100%";
	display: none;
}

#widget1 {
	border-style: dashed;
	cursor: move;
	width: 130px;
	height: 65px;
}

#page-loader {
	height: 100px;
	line-height: 100px;
	text-align: center;
	color: #999999;
	font-size: 13px;
}
/* Note: Try to remove the following lines to see the effect of CSS positioning */
.affix {
	top: 0;
	width: 100%;
	z-index: 9999 !important;
	position: fixed;
}

.affix+.container-fluid {
	padding-top: 70px;
}
.button {
	width: 300px;
	height: 60px;
}

/*
 * Base structure
 */

/* Move down content because we have a fixed navbar that is 50px tall */
body {
	padding-top: 70px;
	padding-bottom: 70px;
}

/*
 * Global add-ons
 */
.sub-header {
	padding-bottom: 10px;
	border-bottom: 1px solid #eee;
}

/*
 * Top navigation
 * Hide default border to remove 1px line.
 */
.navbar-fixed-top {
	border: 0;
}

/*
 * Sidebar
 */

/* Hide for mobile, show later */
.sidebar {
	display: none;
}

@media ( min-width : 768px) {
	.sidebar {
		width: 13%;
		position: fixed;
		top: 51px;
		bottom: 0;
		left: 0;
		z-index: 1000;
		display: block;
		padding: 15px;
		overflow-x: hidden;
		overflow-y: auto;
		/* Scrollable contents if viewport is shorter than content. */
		background-color: #f5f5f5;
		border-right: 1px solid #eee;
	}
}

@media ( max-width : 768px) {
	.sidebar {
		position: top;
		bottom: 0;
		left: 0;
		z-index: 1000;
		display: block;
		padding: 20px;
		overflow-x: hidden;
		overflow-y: auto;
		/* Scrollable contents if viewport is shorter than content. */
		background-color: #f5f5f5;
		border-right: 1px solid #eee;
	}
}

/* Sidebar navigation */
.nav-sidebar {
	margin-right: -21px; /* 20px padding + 1px border */
	margin-bottom: 20px;
	margin-left: -20px;
}

.nav-sidebar>li>a {
	padding-right: 20px;
	padding-left: 20px;
}

.nav-sidebar>.active>a, .nav-sidebar>.active>a:hover, .nav-sidebar>.active>a:focus
	{
	color: #fff;
	background-color: #428bca;
}

/*
 * Main content
 */
.main {
	padding: 20px;
}

@media ( min-width : 768px) {
	.main {
		padding-right: 40px;
		padding-left: 0px;
	}
}

.main .page-header {
	margin-top: 0;
}

/*
 * Placeholder dashboard ideas
 */
.placeholders {
	margin-bottom: 30px;
	text-align: center;
}

.placeholders h4 {
	margin-bottom: 0;
}

.placeholder {
	margin-bottom: 20px;
}

.placeholder img {
	display: inline-block;
	border-radius: 50%;
}

.table tbody tr:hover td, .table tbody tr:hover th {
	background-color: #eeeeea;
}

.table tbody tr td {
	padding: 5px;
}

.table thead th, .table thead tr {
	color: #fff;
	background-color: #4377A5;
}

.panel-primary1>.panel-heading {
	color: #fff;
	background-color: #4377A5;
	border-color: #4377A5;
}

.panel-primary1 {
	border-color: #4377A5;
}

.form-group {
	margin-bottom: 5px;
}

.modal-primary {
	background-color: #4377A5;
	color: white;
	border-top-left-radius: 4px;
	border-top-right-radius: 4px;
}

.modal-success {
	background-color: #5cb85c;
	color: white;
	border-top-left-radius: 4px;
	border-top-right-radius: 4px;
}

.modal-danger {
	background-color: #d9534f;
	border-color: #ac2925;
	color: white;
	border-top-left-radius: 4px;
	border-top-right-radius: 4px;
}

#form-search {
	
}

.sign-box {
	border-style: dashed;
	cursor: move;
	width: 130px;
	height: 65px;
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 1.5vh;
	background-color: #ff9f80;
}

.sign-box2 {
	border-style: none;
	cursor: move;
	width: 130px;
	height: 65px;
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 1.5vh;
	background-color: transparent;
}

#loadingPage {
	width: 100vw;
	height: 100vh;
}

.centered {
	position: fixed;
	top: 50%;
	left: 50%;
	/* bring your own prefixes */
	transform: translate(-50%, -50%);
}

.modal-full {
    min-width: 100%;
    min-height: 100%;
    margin: 0;
}
.modal-backdrop.in {
	opacity: 0.7;
}
/*New Modal CSS Start  */
.user-input-wrp {
	position: relative;
	width: 100%;
}
.user-input-wrp .inputText{
	width: 100%;
	outline: none;
	border:none;
	border-bottom: 1px solid #777;
 	box-shadow: none !important;
    padding-bottom: 10px;
    margin-bottom: 12px;
    font-weight: bold;
}
.user-input-wrp .inputred{
	width: 100%;
	outline: none;
	border:none;
	border-bottom: 1px solid red;
 	box-shadow: none !important;
    padding-bottom: 10px;
    margin-bottom: 12px;
    background-image: url(https://wvapi.tandatanganku.com/img/close.png);
}

.user-input-wrp .inputText:focus{
	border-color: black;
	border-width: medium medium 2px;
}
.user-input-wrp .floating-label {
	position: absolute;
	pointer-events: none;
	top: 18px;
	left: 0px;
	transition: 0.2s ease all;
}
.user-input-wrp input:focus ~ .floating-label,
.user-input-wrp input:not(:focus):valid ~ .floating-label{
	top: 0px;
	left: 0px;
	font-size: 13px;
	opacity: 1;
}
.f-right{
  position: absolute;
    top: 12px;
    right: 0px;
    transition: 0.2s ease all;
}
/*New Modal CSS END  */	

.btn-nav-page {
    background-color: black;
    border-radius: 25px;
    box-shadow: 0 0 4px 0 rgba(0,0,0,.1);
    color: white;
    font-size: 24px;
    height: 50px;
    opacity: .25;
    position: fixed;
    width: 50px;
}
.btn-nav-page:hover {
    color: white;
    opacity: .75;
}
.btn-prev {
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
}
.btn-next {
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
}


.block {
  display: block;
  width: 100%;
  border: none;
  padding: 14px 28px;
  font-size: 20px;
  cursor: pointer;
  text-align: center;
}

.block1 {
  display: block;
  width: 100%;
  border: none;
  cursor: pointer;
  text-align: center;
}

.btn-circle:hover {
  
    
    color:white;
  background-color: black;
  opacity:.75;

}

.btn-circle {
    width: 40px;
    height: 40px;
    padding: 0px 0px;
    border-radius: 45px;
    text-align: center;
    font-size: 20px;
    
    color:black;
 	background-color: rgba(222, 219, 219, 0.35);

}

.btn-circle2 {
    width: 70px;
    height: 40px;
    padding: 0px 0px;
    border-radius: 45px;
    text-align: center;
    font-size: 10px;
    color:black;
    font-weight: bold;
  background-color: rgba(222, 219, 219, 0.35);

}

.btn-circle3 {
    width: 70px;
    height: 40px;
    padding: 0px 0px;
    border-radius: 45px;
    text-align: center;
    font-size: 10px;
    color:black;
    font-weight: bold;
  background-color: rgba(222, 219, 219, 0.35);

}

.btn-circle-grp-top {
    position: fixed;
    top: 80px;
    right: 20px;

}

.btn-circle-grp {
    position: fixed;
    bottom: 110px;
    right: 20px;

}

.btn-circle-grp-l {
    position: fixed;
    bottom: 110px;
    left: 20px;

}

.sticky {
  position: fixed;
  top: 0;
  width: 100%;
}

@media ( min-width : 600px) {
	#main {
		width: 60%;
	}
}

.emojione {
	width: 20px;
	height: 20px;
}
.pass-strength-visible .pass-graybar, .pass-strength-visible .pass-colorbar,
	.form-control:focus+.pass-wrapper .pass-graybar, .form-control:focus+.pass-wrapper .pass-colorbar
	{
	border-bottom-right-radius: 4px;
	border-bottom-left-radius: 4px;
}

/*
	Nav Page
*/
 /** Layout 

    body {

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: cursive;
        height: 100vh;
        margin: 0;
    }
    */
    
    .arrow-wrapper {
        display: flex;
        align-items: center;
        position: fixed;
        bottom: 110px;
        left: 42.5%
    }
    
    .blo {
        width: 80px;
        height: 40px;
        background: #ccc;
        margin: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 45px;
    }
    
    .blo1 {
        width: 70px;
        height: 40px;
        background: #ccc;
        margin: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 45px;
        font-family: auto;
        position: fixed;
        bottom: 110px;
    	left: 20px;
    }
    
    .blo2 {
        width: 40px;
        height: 40px;
        background: #ccc;
        margin: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 45px;
        font-family: auto;
    }
    
    h1 {
        color: #000;
        opacity: 0.4;
        text-align: center;
        text-transform: lowercase;
        transition: opacity 0.5s;
        font-size : x-large;
    }
    
    h3 {
        color: #000;
        opacity: 0.4;
        text-align: center;
        text-transform: lowercase;
        transition: opacity 0.5s;
        font-size :x-small;
    }
    
    .arrow-wrapper:hover h1 {
        opacity: 1;
    }
    
    .blo1:hover h3 {
        opacity: 1;
    }
    
    .blo2:hover h1 {
        opacity: 1;
    }
    /*************** * Arrow 2 ***************/
    
    #arrow_2 .arrow {
        color: #000;
        cursor: pointer;
        display: block;
        align-items: flex-start;
        text-transform: lowercase;
        position: relative;
        transition: transform 0.3s;
    }
    
    #arrow_2 .arrow span {
        display: block;
        /*width: 4em;*/
        opacity: 0;
        transition: opacity 0.3s 0s;
        padding: 0 0.5em;
        font-family: auto;
    }
    
    #arrow_2 .arrow:hover span {
        opacity: 1;
        transition: opacity 0.3s 0.1s;
        font-family: auto;
    }
    
    #arrow_2 .arrow:before {
        content: '';
        display: block;
        border: solid #000;
        border-width: 2px 2px 0 0;
        position: absolute;
        top: 4px;
        width: 10px;
        height: 10px;
    }
    
    #arrow_2 .arrow.arrow--left:before {
        transform: rotate(-135deg);
        right: 0;
        transition: right 0.3s 0.2s;
        color: red;
    }
    
    #arrow_2 .arrow.arrow--left:hover:before {
        right: 100%;
        transition: right 0.3s;
    }
    
    #arrow_2 .arrow.arrow--right {
        text-align: right;
    }
    
    #arrow_2 .arrow.arrow--right:before {
        left: 0;
        transform: rotate(45deg);
        transition: left 0.3s 0.2s;
    }
    
    #arrow_2 .arrow.arrow--right:hover:before {
        left: 100%;
        transition: left 0.3s;
    }
    
    #arrow_2 .arrow:hover {
        transform: none;
    }
    
</style>
</head>



<script type="text/javascript">
	//var scoreInputCode = 0 ;
	
	function isNumberKey(evt){
	    var charCode = (evt.which) ? evt.which : event.keyCode
	    if (charCode > 31 && (charCode < 48 || charCode > 57))
	        return false;
	    return true;	    
	}    

 </script>
 
 <script type="text/javascript">
//////////////////////////////////////////////////////////////////////BAWAAN STR
	
 </script>
 

<body>

	<div id='loadingPage'>
		<img class='centered' width=150px src='img/loading.gif' /><img class='centered' width=110px src='img/digisign-black.png' /><div class='centered' ><p id="loadingPrg" style="margin-top:80px; color: #ff0c0c; font-weight: bold;" align='center'>0%</p></div>
	</div>
		
		 <!-- New Modal Create Password & Email Verification -->
		<div class="modal" id="modalVerif" tabindex="-1" role="dialog" aria-hidden="true">
		    <div class="modal-dialog modal-lg" role="document">
		        <div class="modal-content">
		            <div class="modal-header">
		            	<img src="$domainwv/img/iconfinder_SEO_search_word_3059893.png" class="rounded float-left" style="width: 50px;height: 50px;">
		            	</br></br></br>
		                <h5 class="modal-title" style="position: absolute;left: 60px;top: 25px;">Verifikasi Email Anda !</h5>
		            </div>
		            <form id="formverif">
		            <div class="modal-body modal-body--create-account" id="result">
						<input type="hidden" class="form-control input-md" value="$idmitra" readonly="true" id="idmitra">
						<input type="hidden" class="form-control" id="inputemails" value="$email" disabled>
		            	<div class="modal-header--no-border p-3 bg-light">
						    <div class="form-group">
						    	<small>Email</small></br>
						    	<label for="inputemail" class="col-form-label"><b>$email</b></label>	
						    </div>
						</div>
		            	<div class="user-input-wrp">
		            		<div class="form">
		            			<div class="form-group">
						            <div class="user-input-wrp justify-content-between">
									  </br>
									  <input type="text" class="inputText" id="inputVer" maxlength="6" onkeypress="return isNumberKey(event)" required=""/>
									  <span class="floating-label">Kode Verifikasi</span>
									  <div class="rounded f-right">
										  	<input class="btn btn-info" type="button" id="reqVer" onclick="otp_email_activsign('$domainwv')" value="Kirim Kode Verifikasi" Title="Klik untuk mengirimkan kode Verifikasi ke email anda">
									  </div>
									  <font color="green"><div id="sukses_otp_ver" style="font-size: 10px;"></div></font>
							  		  <font color="red"><div id="gagal_otp_ver" style="font-size: 10px;"></div></font>
							  		  <font color=red><div id="null_verifikasi"></div></font>
									  <font color=red><div id="e_verifikasi"></div></font>
									  <small id="note otp" class="form-text text-muted">*Tunggu 1 menit untuk kirim kode Verifikasi lagi.</small>
									</div>
								</div>
			            	</div>    
								<div class="form-group" style="display: flex;">
				                        <font>
				                          <b>Apabila terdapat kesalahan pada email anda, Silahkan menghubungi $namamitra</b>
				                      </font>
				                </div>
				        </div>
		            </div></br>
		            <div class="modal-footer justify-content-between">
		            	<img src="$domainwv/img/digisign-powered.png" class="rounded float-left" style="width: 120px;height: 40px;">
		                <button type="submit" class="btn btn-md btn-info" style="width: 120px;" name="cekverif" id="cekverif">
							Lanjut
						</button>
						<button class="btn btn-info" type="button" id="disabledbtn" disabled>Mengecek Kode Verifikasi...</button>
		            </div>
		            </form>
		            
		        </div>
		    </div>
		</div>
		
		<div class="modal" id="modalActive" tabindex="-1" role="dialog" aria-hidden="true">
		    <div class="modal-dialog modal-lg" role="document">
		        <div class="modal-content">
		            <div class="modal-header">
		            	<img src="$domainwv/img/ic_lock.png" class="rounded float-left" style="width: 50px;height: 50px;">
		            	</br></br></br>
		                <h5 class="modal-title" style="position: absolute;left: 60px;top: 25px;">Buat kata sandi untuk akun DigiSign Anda !</h5>
		            </div>
		            <form id="formactive">
		            <div class="modal-body modal-body--create-account" id="result">
		            	<div class="user-input-wrp">
			            	<div class="form">
							    
							    <input type="hidden" id="inputNewUsername" value="$newusername">
							    <input type="hidden" id="inputiduser" value="$iduser"> 
					            <div class="form-group">
					            <div class="user-input-wrp">
								  </br>
								  <input type="password" onkeyup="validatePwd()" class="inputText" id="password_act" minlength="6" maxlength="20" style="margin-bottom: 0px;" required=""/>
								  <span class="floating-label">Password</span>
								  <span id='messagepwd' style="position: absolute;top: 15%;right: 0%;"></span>
								  <font color=red><div id="null_password"></div></font>
								  <font color=red><div id="e_password"></div></font>
								</div>
								</div>
								<div class="form-group">
					            <div class="user-input-wrp">
								  </br>
								  <input type="password" onkeyup="validatePwd()" class="inputText" id="password_act2" minlength="6" maxlength="20" required=""/ >
								  <span class="floating-label" style="width: 100%;">Ulang Password</span>
								  <div class="rounded f-right">
									<span id='message' style="position: absolute;color: rgb(255, 0, 0);top: 0%;right: 0%;"></span>
								  </div>
								</div>
								<font color=red><div id="null_password2"></div></font>
								<font color=red><div id="e_password2"></div></font>
								<font color=red><div id="null_confirm"></div></font>
								</div>
								</br>
					        
								</br>
					            
								<div class="form-group" style="display: flex;">

				                    <label>
				                      <input type="checkbox" id="agree" class="checkagree my-2" disabled="">
				                    </label>

				                     <div class="col">
				                        <font>
				                          <b>Saya menyetujui <a target="_blank" rel="noopener noreferrer" href="$webdomain/terms.html">ketentuan layanan</a> tanda tangan elektronik <a target="_blank" rel="noopener noreferrer" href="$domainweb">(Digisign)</a></b>
				                      </font>
				                  </div>
				                </div>
						  	</div>
					  	</div>
						
		            </div></br>
		            <div class="modal-footer justify-content-between">
		            	<img src="$domainwv/img/digisign-powered.png" class="rounded float-left" style="width: 120px;height: 40px;">
		                <button type="submit" class="btn btn-md btn-info" style="width: 120px;" name="simpanpwd" id="simpanpwd" disabled="">
							Simpan
						</button>
		            </div>
		            </form>
		        </div>
		    </div>
		</div>

		<!-- Modal -->
		<div class="modal fade" id="alertModal" tabindex="-1" role="dialog"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header" id="headerAlert">
						<h5 class="modal-title" id="titleAlert">Lokasi Tandatangan</h5>

					</div>
					<div id="textAlert" class="modal-body"></div>
					<div class="modal-footer" id="footerAlert">
						<button type="button" class="btn btn-sm btn-default"
							data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="alertModalSuccess" tabindex="-1" role="dialog"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header" id="headerAlertS">
							<h5 class="modal-title" id="titleAlertS"></h5>
					</div>
					<div id="textAlertS" class="modal-body"></div>
					<div class="modal-footer" id="footerAlertS">
						
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="alertModalSuccessRedirect" tabindex="-1" role="dialog"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header" id="headerAlertR">
						<h5 class="modal-title" id="titleAlertR"></h5>
						
					</div>
					<div id="textAlertR" class="modal-body"></div>
					<div class="modal-footer" id="footerAlertR">
						<button type="button" class="btn btn-sm btn-default" onclick="redirectFunction($link_red)">Tekan Disini Untuk Melanjutkan</button>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="gotoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" >
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      
		      <div id="textAlert" class="modal-body">
		                <label for="email" class="mr-sm-2">Go to page :</label><input type="number" id="gotopage"  class="form-control mb-2 mr-sm-2"/ >
		      </div>
		      <div class="modal-footer" id="footerAlert">
		                <button type="button" id="goEnter" class="btn btn-primary mb-2 mr-sm-2" data-dismiss="modal">GO</button>
		      </div>
		    </div>
		  </div>
		</div>
		<div class="modal fade" id="gotoHalaman" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" >
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      
		      <div id="textAlert" class="modal-body">
		                <label for="email" class="mr-sm-2">Langsung menuju halaman tandatangan ? </label>
		      </div>
		      <div class="modal-footer" id="footerAlert">
		                <button type="button" class="btn btn-primary mb-2 mr-sm-2" data-dismiss="modal" onClick="toSgn();">Lanjut</button>
		      </div>
		    </div>
		  </div>
		</div>
  
		
		<div class="modal fade" id="Flag" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header" id="headerAlert">
						<h5 class="modal-title" id="titleAlert">Info</h5>

					</div>
					<div id="textAlert" class="modal-body">Dokumen Sudah ditandatangan</div>
					<div class="modal-footer" id="footerAlert">
						<button type="button" class="btn btn-sm btn-default"
							data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		
		<!-- New Modal -->
		<div class="modal fade" id="alertKonfirmasi" tabindex="-1"
			role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">Pernyataan</h4>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				          <span aria-hidden="true">&times;</span>
				        </button>
					</div>
					<div class="modal-header--no-border p-3 bg-light">
					    <div class="form-group">
					    	<small>Email</small></br>
					    	<label for="inputUsername" class="col-form-label"><b>$email</b></label>	
					    </div>
					    <div class="form-group">
					    	<small>No Handphone</small></br>
					    	<label for="inputUsername" class="col-form-label"><b>$nohp</b></label>	
					    </div>
					</div>
					<form id="formSign">
					<div class="modal-body modal-body--create-account">						
						
					  	<div class="user-input-wrp">
					  		
			            	<div class="form">
								<input type="hidden" id="username" value="$username"></input>    
					            <div class="form-group">
						            <div class="user-input-wrp justify-content-between">
									  </br>
									  <input type="text" class="inputText" id="inputCode" maxlength="6" onkeypress="return isNumberKey(event)" required=""/>
									  <span class="floating-label">Kode OTP</span>
									  <div class="rounded f-right">
										  	<input class="btn btn-info" type="button" id="reqOtp" onclick="otp('$domainwv')" value="Kirim OTP">
									  </div>
									  <font color="green"><div id="sukses_otp" style="font-size: 10px;"></div></font>
							  		  <font color="red"><div id="gagal_otp" style="font-size: 10px;"></div></font>
									  <small id="note otp" class="form-text text-muted">*Tunggu 1 menit untuk kirim kode OTP lagi.</small>
									</div>
								</div>
								<div class="form-group">
						            <div class="user-input-wrp">
									  </br>
									  <input type="password" class="inputText" id="inputPassword" minlength="6" maxlength="20" required="" / >
									  <span class="floating-label" style="width: 100%;">Password<span id="message" style="float: right;"></span> </span>
									  <small id="lupa" class="form-text text-muted"><a target="_blank" rel="noopener noreferrer" href="$link">Lupa Password ?</a></small>
									</div>
								</div>
								</br>
					            
								
						  	</div>
					  	</div>

						<div class="form-group row">
						    <div class="col-sm-8">
						      <input type="hidden" class="form-control" id="inputUser" value="$email" disabled="">
						    </div>
						    
						    <div class="col-sm-8">
						      <input type="hidden" class="form-control" id="inputHp" value="$nohp" disabled="">
						    </div>
						    
					  	</div>
						
						<p>
							<div class="checkbox">
							  <label><input type="checkbox" id="checkme">
							  	<font size="+1"><b>Saya menyetujui menandatangani
								dokumen ini</b></font>
							  </label>
							</div>
							<!-- 
							<font size="+1"><b>Saya menyetujui menandatangani
								dokumen ini</b></font>
							 -->
						</p>
					</div>
					<div class="modal-footer bg-light">
						<button type="submit" class="btn btn-md btn-secondary" style="width: 120px;" name="setuju" id="setuju" disabled>
							Setuju
						</button>	
					</div>
					</form>
				</div>
			</div>
		</div>



		<input id="upload-button" type="hidden" /> <input type="file"
			id="file-to-upload" accept="application/pdf" />
		<div id="widget">
			<!--img id="img1" src='174855.png'/-->
		</div>

		<nav id="navtop" class="navbar  fixed-top navbar-light bg-light device-fixed-width">
			  <a class="navbar-brand" href="#" style="text-overflow: ellipsis;white-space:nowrap;display: inline-block;overflow: hidden;float: left;max-width: 50%;">$file_name</a>
			  <div id="page-count-container">
			  		<a class="navbar-brand" target="_blank" rel="noopener noreferrer" onclick="zoomin()" title="Perbesar Tampilan Dokumen"><img src="$domainwv/img/icons8-zoom-in-96.png" style="height: 40px;"></a>
					<a class="navbar-brand" target="_blank" rel="noopener noreferrer" onclick="zoomout()" title="Perkecil Tampilan Dokumen"><img src="$domainwv/img/icons8-zoom-out-96.png" style="height: 40px;"></a>
			  </div>
		</nav>
		<div id='main-body'>
		<div id="pdf-main-container">
	

		<div id="page-loader" >Loading page ...</div>
       
		    <canvas id="pdf-canvas" ></canvas>


		</div>
		 </div>
		 		<div id="sgn-widget" >

		</div>
		<div id="widget1" style="position :absolute; display:none;" >
  		</div>
  		
		<button class="btn btn-nav-page btn-prev" id="pdf-prev" title="Halaman Sebelumnya">&#171;</button>
         <button class="btn btn-nav-page btn-next" id="pdf-next" title="Halaman Selanjutnya">&#187;</button>
		 <nav id="secondNav" class="navbar fixed-bottom navbar-light bg-light" style="width:100%">
  			<button type="button" class="btn btn-success btn-lg btn-block" id="prosesSign">Proses</button></br>
		 	<table width="100%">
		 		<tr>
		 			<td width="30%">
		 				<a class="navbar-brand" target="_blank" rel="noopener noreferrer"><img src="$domainwv/img/digisign-powered.png" class="rounded float-left" style="width: 120px;height: 40px;"></a>
		 			</td>
		 			<td width="40%">
		 				<!-- <div id="page-bottom"><div id="pdf-current-page"><input type="text" id="pageText" size="1" onchange="setPage()"></div> / <div id="pdf-total-pages">2</div> </div>-->
		 				<div id="goButton" class="blo" style="margin-right: auto; margin-left: auto;" title="Pilih Halaman"><span id="pageText"></span>/<span id="pdf-total-pages"></span></div>
		 			</td>
		 			<td width="30%" align="right">
		 				<button type="button" class="btn btn-info" id="goHal" title="Halaman Tandatangan"><img src="$domainwv/img/iconfinder_Asset_93_3298612.png" class="rounded float-right" style="height: 40px;"></button>	
			    
		 			</td>
		 		</tr>
		 	</table>
		  
		</nav> 
		<!-- <div id="signpage" class="btn-circle-grp-l">
  			<button class="btn-circle3" onClick="toSgn();">Sign Page</button>

		</div>
		<div id="buletbulet1" class="btn-circle-grp-top">
		
		  	  <button id="goButton" class="btn-circle2"><span id="pageText"></span>/<span id="pdf-total-pages"></span></button>
		</div>
		
		<div id="buletbulet2" class="btn-circle-grp">
		
			  <button class="btn-circle" onclick="zoomout()" >-</button>
			  <button class="btn-circle" onclick="zoomin()" >+</button>
			  <button class="btn-circle" id="pdf-prev" > < </button>
			  <button class="btn-circle" id="pdf-next"> > </button>
		</div>
		 <div id="zoom" class="blo2" style="position: fixed;right: 1%;top: 36%;" onclick="zoomin()">
    		<h1 style="margin-top: 0px;margin-bottom: 0px;">+</h1></div>
		 <div id="zoom" class="blo2" style="position: fixed;right: 1%;top: 46%;" onclick="zoomout()">
    		<h1 style="margin-top: 0px;margin-bottom: 0px;">-</h1></div>

		 <div id="signpage" class="blo1" onClick="toSgn();">
    		<h3>Halaman ttd</h3></div>
		 <div id="arrow_2" class="arrow-wrapper">
    	 	<div id="pdf-prev" class="arrow arrow--left">
        		<span style="padding-left: 0px;padding-right: 0px;">Sebelumnya</span>
    		</div>

    	 <div id="goButton" class="blo" style="margin-right: 0px; margin-left: 0px;">
         	<h1><span id="pageText"></span>/<span id="pdf-total-pages"></span></h1></div>

    	 <div id="pdf-next" class="arrow arrow--right">
        	<span style="padding-left: 0px;padding-right: 0px;">Selanjutnya</span>
    	 </div>

</div>
    	
        
		 
		 
		<nav id="navbottom" class="navbar fixed-bottom navbar-light bg-light" style="width:100%; padding-top:0px; padding-left: 0px;padding-bottom: 0px; padding-right: 0px;">
		<button id="prosesSign" class="btn btn-success block" >Proses</button>
  		<div class="block1 button-next"> <b>powered by : </b><img width=110px src='img/digisign-black.png' /></div>
		</nav>
		 -->
		<!-- PDF////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
		
		
	
	<!-- <div id="sgn-widget"></div>-->

	<!-- div id='sgn-user'  class='sign-box' style='position :absolute;display:none; vertical-align: middle;'>
		<a id="sgnClick" href="#" onClick='signProcess();'>Sign Here</a>
		<img  id="sgnImg" src="data:image/png;base64,${sgn_img}" style="width:auto;height:auto;display:none;max-height:100%;" />
		</div-->

	<script>
		
		$("#pdf-loader").show();
		$("#pdf-canvas").hide();
		$('#sgn-user').hide();

		var zm= 1;
		var __PDF_DOC,
			__CURRENT_PAGE,
			__TOTAL_PAGES,
			__PAGE_RENDERING_IN_PROGRESS = 0,
			__CANVAS = $('#pdf-canvas').get(0),
			__CANVAS_CTX = __CANVAS.getContext('2d');
		var pdfwidth = 0;
		var pdfheight = 0;
		var ori_width;
		var ori_height;
		var pdfLoc;
		
		//var __PDF_DOC,
			//__CURRENT_PAGE,
			//__TOTAL_PAGES,
			//__PAGE_RENDERING_IN_PROGRESS = 0,
			//__CANVAS = $('#pdf-canvas').get(0),
			//__CANVAS_CTX = __CANVAS.getContext('2d');
		
		var dataUser = $locSign;
		var jsonText = dataUser.user;
		//var jsonText=dataUser.data;
		usersign.usersign = $("#inputUser").val();
		var last=0;
		
		function setData(){
			var html="";
			var html2="";
			for (x in jsonText) {
				if(jsonText[x].status=="0")html+="<div class='child'> <a onclick='return setLoc(\"sgn-user-"+x+"\");' class='btn btn-xs btn-block'  style='color:black;white-space:normal;background-color:"+jsonText[x].color+";'>"+jsonText[x].user+"</a></div>";
				if(jsonText[x].status=="1")html2+="<div class='child'> <a onclick='return setLoc(\"sgn-user-"+x+"\");' class='btn btn-xs btn-block'  style='color:black;white-space:normal;background-color:"+jsonText[x].color+";'>"+jsonText[x].user+"</a></div>";
			} 
			document.getElementById("lsign").innerHTML= html2;
			document.getElementById("lwait").innerHTML= html;
			if(html2=="")$("#label-lsign").hide();
			else $("#label-lsign").show();
		}
		function trace(){
			console.log(jsonText);
		}
		
		
		function showPDF(path) {
			$("#pdf-loader").show();
			//PDFJS.getDocument({ url: path }).then(function(pdf_doc) {
			PDFJS.getDocument({ url: path }, false, null, function(progress) {
				var total = 0;
				if(progress.total == undefined){
					total = progress.loaded + progress.loaded;
				}
				else {
					total = progress.total;
				}
				var percent_loaded = Math.floor((progress.loaded / total) * 100);//progress.total undefined
				console.log(progress.total + ' # ' + progress.loaded + ' * ' + total +' $ ' + percent_loaded);
				percent_loaded = percent_loaded > 100? 100: parseInt(percent_loaded); 
				$("#loadingPrg").html(percent_loaded+"%");
				
			}).then(function(pdf_doc) {
				__PDF_DOC = pdf_doc;
				__TOTAL_PAGES = __PDF_DOC.numPages;
				
				// Hide the pdf loader and show pdf container in HTML
				$("#pdf-loader").hide();
				$("#pdf-contents").show();
				$("#pdf-total-pages").text(__TOTAL_PAGES);

				// Show the first page
				showPage(1);
				//Android.setPage(__TOTAL_PAGES);
				

			}).catch(function(error) {
				// If error re-show the upload button
				$("#pdf-loader").hide();
				$("#upload-button").show();
				
				alert(error.message);
			});;
		}
		
		function initData(){
			var html="";
			for (x in jsonText) {
				//jsonText[x].sgn="0";
				if(jsonText[x].type=="sign"){
					html+="<div id='sgn-user-"+x+"' class='sign-box' style='postion :static; vertical-align: middle;' ><a align='center' id='sgnClick-"+x+"' href='javascript:void(0)' onClick='signProcess("+x+");' style='text-align:center;'> <img src='$domain/img/sign.png' height='37%' width='37%'/> </a>		<img  id='sgnImg-"+x+"' src='data:image/png;base64,${sgn_img}' style='width:auto;height:auto;display:none;max-height:100%;' /></div>";
				}
				else {
					html+="<div id='sgn-user-"+x+"' class='sign-box' style='postion :static; vertical-align: middle;' ><a align='center' id='sgnClick-"+x+"' href='javascript:void(0)' onClick='signProcess("+x+");' style='text-align:center;'><img src='$domain/img/initial.png' height='37%' width='37%'/> </a>		<img  id='sgnImg-"+x+"' src='data:image/png;base64,${sgn_img}' style='width:auto;height:auto;display:none;max-height:100%;' /></div>";
				}
			} 
			document.getElementById("sgn-widget").innerHTML= html;

			//trace();
			//setData();

		}
		
		function setLocation(){
		
			for (x in jsonText) {
				
				var position = $('#pdf-canvas').position();
				var canvasElem = document.querySelector('canvas');
				var scale_sign_w=$('#pdf-canvas').width()/ori_width;
				var scale_sign_h=$('#pdf-canvas').height()/ori_height;
				
				//var cw=(130*scale_sign_w)/2;
				////var ch=(65*scale_sign_h)/2;
				////var sz_font=(32*scale_sign_w/2);
				
				////$('#sgn-user-'+x).css('width',(130*scale_sign_w)+'px');
				////$('#sgn-user-'+x).css('height',(65*scale_sign_h)+'px');
				
				$('#sgn-user-'+x).css('width',((jsonText[x].rx-jsonText[x].lx)*scale_sign_w)+'px');
				$('#sgn-user-'+x).css('height',((jsonText[x].ry-jsonText[x].ly)*scale_sign_h)+'px');
				
				var topSgn=ori_height-jsonText[x].ry;
				document.getElementById('sgn-user-'+x).style.top=(position.top+(topSgn*scale_sign_h))+'px';
				document.getElementById('sgn-user-'+x).style.left=(position.left+(jsonText[x].lx*scale_sign_w))+'px';
				document.getElementById('sgn-user-'+x).style.position='absolute';
				if(__CURRENT_PAGE==jsonText[x].page){
					$('#sgn-user-'+x).show();
				}else{
					$('#sgn-user-'+x).hide();
					
				}
			}
		}
		initData();
		$("#pdf-loader").show();
		$("#pdf-canvas").hide();
		var init_x=1;
		

		
		
		
		var options = options || { scale: 1 };
		var ori_width;
		var ori_height;
		var scale_sign_w;
		var scale_sign_h;
		
		function showPage(page_no) {
			var diffPage=false;
			if(init_x==0 && __CURRENT_PAGE!=page_no){
			    diffPage=true;
			}
			__PAGE_RENDERING_IN_PROGRESS = 1;
			__CURRENT_PAGE = page_no;
		
			// Disable Prev & Next buttons while page is being loaded
			$("#pdf-next, #pdf-prev").attr('disabled', 'disabled');
		
			// While page is being rendered hide the canvas and show a loading message
			$("#pdf-canvas").hide();
			$("#page-loader").show();
		
			
			// Update current page in HTML
			$("#pageText").text(page_no);
			
			// Fetch the page
			__PDF_DOC.getPage(page_no).then(function(page) {

				ori_width= page.getViewport(1).width;
				ori_height= page.getViewport(1).height;
				// As the canvas is of a fixed width we need to set the scale of the viewport accordingly
				
		   
		    var viewport;
			        //var viewport = page.getViewport(options.scale);
				// Get viewport of the page at required scale
				
		  
		   
		   viewport = page.getViewport(4);
		   __CANVAS.height = viewport.height;
		   __CANVAS.width = viewport.width; 
		   if(init_x==1 || diffPage==true){

		        zm="100%";
		        init_x=0;
		    }
		   __CANVAS.style.width =zm;
		   //console.log(zm);
		   
				
		    


				
				// __CANVAS.height = window.innerHeight;
				 //__CANVAS.width = window.innerWidth;


				var renderContext = {
					canvasContext: __CANVAS_CTX,
					viewport: viewport
				};
				
				// Render the page contents in the canvas
				page.render(renderContext).then(function() {
					__PAGE_RENDERING_IN_PROGRESS = 0;

					// Re-enable Prev & Next buttons
					$("#pdf-next, #pdf-prev").removeAttr('disabled');

					// Show the canvas and hide the page loader
					$("#pdf-canvas").show();
					$("#page-loader").hide();

					$("#main-body").show();
					$("#loadingPage").hide();
					pdfheight=$("#pdf-canvas").height();
					pdfwidth=$("#pdf-canvas").width();
					rect = document.getElementById("pdf-canvas").getBoundingClientRect();

		   
		   
		      setLocation();
				});

			});
			
			
		}
		
		// Upon click this should should trigger click on the #file-to-upload file input element
		// This is better than showing the not-good-looking file input element
		$("#upload-button").on('click', function() {
			$("#file-to-upload").trigger('click');
		});
		
		// When user chooses a PDF file
		$("#file-to-upload").on('change', function() {
			// Validate whether PDF
		    if(['application/pdf'].indexOf($("#file-to-upload").get(0).files[0].type) == -1) {
		        alert('Error : Not a PDF');
		        return;
		    }
		
			$("#upload-button").hide();
		
			// Send the object url of the pdf
			
		});
		
		// Previous page of the PDF
		$("#pdf-prev").on('click', function() {
			prev();
		});
		
		// Next page of the PDF
		$("#pdf-next").on('click', function() {
			next();
		});
		
		document.getElementById("agree").disabled = true;
		$('#inputNewPassword, #retypeNewPassword').on('keyup', function () {
			var lowerCaseLetters = /[a-z]/g;
			var upperCaseLetters = /[A-Z]/g;
			var numbers = /[0-9]/g;
			var scoreWeak = 0;
			var scoreMatch = 0;
			
			
			if($('#inputNewPassword').val().length<6){
				$('#messagepwd').html('Minimal 6 karakter').css('color', 'red');
				scoreWeak = 0;
			} else {
				
				if($('#inputNewPassword').val().match(lowerCaseLetters) && $('#inputNewPassword').val().match(upperCaseLetters) && $('#inputNewPassword').val().match(numbers)) {
					$('#messagepwd').html('Kuat').css('color', 'green');	
					scoreWeak = 1;
				}
				else if($('#inputNewPassword').val().match(lowerCaseLetters) && $('#inputNewPassword').val().match(upperCaseLetters)){
					$('#messagepwd').html('Sedang. Gunakan kombinasi angka dan huruf besar kecil').css('color', 'green');
					scoreWeak = 1;
				}
				else if($('#inputNewPassword').val().match(lowerCaseLetters) && $('#inputNewPassword').val().match(numbers)){
					$('#messagepwd').html('Sedang. Gunakan kombinasi angka dan huruf besar kecil').css('color', 'green');
					scoreWeak = 1;
				}
				else {
					$('#messagepwd').html('Lemah. Gunakan kombinasi angka dan huruf besar kecil').css('color', 'red');
					scoreWeak = 0;
				}
				
				//$('#messagepwd').html('').css('color', 'green');
			}
			
			  if ($('#inputNewPassword').val() == $('#retypeNewPassword').val() && $('#inputNewPassword').val().length>5) {
			    $('#message').html('<img src="$domainwv/img/centang.png" height="24" width="20"/>').css('color', 'green');
			    scoreMatch = 1;
			  } else 
				  {
			    	$('#message').html('<img src="$domainwv/img/close.png" height="24" width="20"/>').css('color', 'red');
			    	scoreMatch = 0;
				  }
			  
			  	if(scoreWeak == 1 && scoreMatch == 1)
		  		{
		  			document.getElementById('agree').disabled = false;
		  		}
		  		else
		  		{
		  			document.getElementById('agree').disabled = true;
		  		}
			});
		
		function next(){
			if(__CURRENT_PAGE != __TOTAL_PAGES)
				showPage(++__CURRENT_PAGE);
		}
		
		function prev(){
			if(__CURRENT_PAGE != 1)
				showPage(--__CURRENT_PAGE);
		}
		
		//function save(){
		//		DS.ResultSignDoc(1);
		//}
		
		
		function goPage(pageTo){
			if(pageTo > 0 && pageTo <= __TOTAL_PAGES)
				showPage(pageTo);
			else alert("Error!");
			
		}
		
	
		function setPage(){
			var pageTo=parseInt($("#pageText").text());
			if(pageTo > 0 && pageTo <= __TOTAL_PAGES)
				showPage(pageTo);
			else{
				 $("#pageText").text(__CURRENT_PAGE);
				 alert("Error!");
			}
		}

		
		function toSgn(){
			goPage(jsonText[last].page);
			if(last+1>=jsonText.length){
				last=0;
			}else{
				last++;
			}
		}
		
		function alertDanger(text, ret){
			$("#headerAlert").removeClass('modal-header-success').addClass('modal-header-danger');
			$("#textAlert").text(text);
			$("#titleAlert").text("Gagal");
			$("#footerAlert").show();
			$('#alertModal').modal({
			  keyboard: true,
			  backdrop:true
			});
			$("#alertModal").modal('show');
		}
		
		
		function alertSucess(text){
			$("#headerAlertS").removeClass('modal-header-danger').addClass('modal-header-success');
			$("#textAlertS").text(text);
			$("#titleAlertS").text("Sukses");
			$("#footerAlertS").show();
			$('#alertModalSuccess').modal({
			  keyboard: false,
			  backdrop:false
			});
			$("#alertModalSuccess").modal('show');
		
		
		}
		function alertSucessredirect(text,link){
			$("#headerAlertR").removeClass('modal-header-danger').addClass('modal-header-success');
			$("#textAlertR").text(text);
			$("#titleAlertR").text("Sukses");
			$("#footerAlertR").show();
			$("#linkredirect").text(link);
			$link_red=link;
			$('#alertModalSuccessRedirect').modal({
			  keyboard: false,
			  backdrop:false
			});
			$("#alertModalSuccessRedirect").modal('show');
			
		
		}
		
		function redirectFunction(link) {
			  location.replace(link)
		}
		
		function cekComplete(){
			for (x in jsonText) {
				if(jsonText[x].status=="0"){
					return false;
				}
			}
			if(sign==1)return true;
			return false;
		}

		function loading(){
			$("#headerAlert").removeClass('modal-header-success').removeClass('modal-header-danger');
			$("#titleAlert").text("Data Sedang Diproses");
			$("#footerAlert").hide();
			$("#textAlert").html("<div class=\"progress\"><div class=\"progress-bar progress-bar-striped progress-bar-animated\" role=\"progressbar\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 100%\"></div></div>");
			$('#alertModal').modal({
			  keyboard: false,
			  backdrop:'static'
			});
			$("#alertModal").modal('show');
		}
		
		function signProcess(x){
			$('#sgn-user-'+x).removeClass('sign-box').addClass('sign-box2');
			$('#sgnClick-'+x).hide();
			$('#sgnImg-'+x).show();
			jsonText[x].sgn="1";
			jmlttd++;
			dataUser.user=jsonText;
			sign=1;
		}
		
		function active(status){
			if(status=='1') {
				//$('#modalVerif').show();
				$("#modalVerif").modal({backdrop: "static"});
				$('#modalActive').hide();
				$("#disabledbtn").hide();
				document.getElementById("navtop").style.filter = "blur(10px)";
				document.getElementById("main-body").style.filter = "blur(59px)";
				document.getElementById("sgn-widget").style.filter = "blur(10px)";
				//document.getElementById("signpage").style.filter = "blur(10px)";
				//document.getElementById("zoom").style.filter = "blur(10px)";
				//document.getElementById("arrow_2").style.filter = "blur(10px)";
				document.getElementById("secondNav").style.filter = "blur(10px)";
				document.getElementById("pdf-next").style.filter = "blur(10px)";
				document.getElementById("pdf-prev").style.filter = "blur(10px)";
			}
			else {
				$('#modalVerif').hide();
				$('#modalActive').hide();
				document.getElementById("navtop").style.filter = "none";
				document.getElementById("main-body").style.filter = "none";
				document.getElementById("sgn-widget").style.filter = "none";
				//document.getElementById("signpage").style.filter = "none";
				//document.getElementById("zoom").style.filter = "none";
				//document.getElementById("arrow_2").style.filter = "none";
				document.getElementById("secondNav").style.filter = "none";
				document.getElementById("pdf-next").style.filter = "none";
				document.getElementById("pdf-prev").style.filter = "none";
			}
			
		}
		
		

		$("#download-image").on('click', function() {
		    var canvas = document.getElementById('pdf-canvas');
		    var image = document.getElementById('img1');
		    var ctx = canvas.getContext('2d');
		    var dm = document.getElementsByClassName('dragme');
			alert("canvas "+canvas.offsetLeft);
			alert("canvas "+canvas.offsetTop);
		    alert("left"+lefts);
		    alert("top"+tops);
		    
		    image.height = heights;
		    image.width = widths;
		    alert("widths ="+widths+" heights ="+heights);
		    alert("image width ="+image.width+" image height ="+image.height);
		    
			ctx.drawImage( image , lefts-canvas.offsetLeft , tops-canvas.offsetTop, image.width, image.height);
		   
			$(this).attr('href', __CANVAS.toDataURL("image/jpeg", 1)).attr('download', 'page.jpg');
		});
		function setModalMaxHeight(element) {
			  this.$element     = $(element);  
			  this.$content     = this.$element.find('.modal-content');
			  var borderWidth   = this.$content.outerHeight() - this.$content.innerHeight();
			  var dialogMargin  = $(window).width() < 768 ? 20 : 60;
			  var contentHeight = $(window).height() - (dialogMargin + borderWidth);
			  var headerHeight  = this.$element.find('.modal-header').outerHeight() || 0;
			  var footerHeight  = this.$element.find('.modal-footer').outerHeight() || 0;
			  var maxHeight     = contentHeight - (headerHeight + footerHeight);

			  this.$content.css({
			      'overflow': 'hidden'
			  });

			  this.$element
			    .find('.modal-body').css({
			      'max-height': maxHeight//,
			      //'overflow-y': 'auto'
			  });
		}
		
		$('.modal').on('show.bs.modal', function() {
			  $(this).show();
			  setModalMaxHeight(this);
		});

		$('.modal').on('hidden.bs.modal', function() {
			  	$("#widget1").hide();

		});

		
		
		function zoomin() {
		    if(zo < zomx){
		        if(zo==0||zo==1){
		            zm2();
		            zo=2;
		        }else if(zo==2){
		            zm3();
		            zo=3;
		        }else if(zo==3){
		            zm4();
		            zo=4;
		        }
		    }
		}
		
		function zoomout() {
		    if(zo > zimx){
		        if(zo==4){
		            zm3();
		            zo=3;
		        }else if(zo==3){
		            zm2();
		            zo=2;
		        }else {
		            zm1();
		            zo=1;
		        }
		        
		        
		    }
		    
		}

		function zm1(){
		    
		    
		    zm = '100%';
		    showPage(__CURRENT_PAGE);
		    zo=1;

		}

		function zm2(){
		
		    zm = '150%';
		    showPage(__CURRENT_PAGE);
		    zo=2;

		}
		function zm3(){
		  
		    zm = '200%';
		    showPage(__CURRENT_PAGE);
		    zo=3;

		}
		function zm4(){
		   
		    zm = '250%';
		    showPage(__CURRENT_PAGE);
		    zo=4;

		}
		
		//untuk tombol setuju
		var checkme=document.getElementById('checkme');
		var setujubtn = document.getElementById('setuju');
		checkme.onchange = function() {
		 	setujubtn.disabled = !this.checked;
		};
		
		//untuk tombol simpan pwd
		var simpanpwd=document.getElementById('agree');
		var simpanpwdbtn = document.getElementById('simpanpwd');
		simpanpwd.onchange = function() {
			simpanpwdbtn.disabled = !this.checked;
		};
		
		//http://localhost:8086/doc/listdoc.html?frmProcess=getFile&path=../UploadFile/86/original/&name=DS20171004121746.pdf&filename=Surat%20ijin.pdf
		//var urlParams = new URLSearchParams(window.location.search);
		//var path = urlParams.toString();
		
		active(statususer);
		showPDF('$pdf_link');
		
		if(isSign == true)
		{
			$("#Flag").modal('show');
			$("#cancelLocation").hide();
			$("#prosesSign").hide();
			$("#location").hide();
		}
		else
		{
			$("#Flag").modal('hide');
			//$("#mainNav").show();
			//$("#secondNav").show();
		}
		
		if($by_pass_click)
		{
			for (x in jsonText) {
				signProcess(x);
			} 
			$("#sgnClick-").click();
			$("#sgnClick-").trigger("click");

			sign = 1;
		}
		
		/* var x = document.getElementById('arrow_2'); */
	    var idleTime = 0;
	    jQuery(document).ready(function($) {
	        //Increment the idle time counter every minute.
	        var idleInterval = setInterval(timerIncrement, 1000); // 1 second = 1000

	        //Zero the idle timer on mouse movement.
	        $(document).mousemove(function(e) {
	            idleTime = 0;
	            //        x.style.display = "flex";
	            $("#pdf-prev").show(150);
	            $("#pdf-next").show(150);
	        });
	        $(document).keypress(function(e) {
	            idleTime = 0;
	            //        x.style.display = "flex";
	            $("#pdf-prev").show(150);
	            $("#pdf-next").show(150);
	        });
	    });

	    function timerIncrement() {
	        idleTime = idleTime + 1;
	        //console.log("IDLE" + idleTime);
	        if (idleTime >= 5) { // 5 seconds
	            // fade out div
	            //        x.style.display = "none";
	            //        x.style.opacity= 0;
	            $("#pdf-prev").hide(150);
	            $("#pdf-next").hide(150);
	        }
	    }
		
		</script>
	</div>
	<!-- main-body -->
</body>
</html>
